{
  "name": "sadaqa-reels-api",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "sadaqa-reels-api",
      "version": "1.0.0",
      "dependencies": {
        "aws-sdk": "^2.1550.0",
        "cors": "^2.8.5",
        "express": "^4.18.2"
      }
    },
    "node_modules/aws-sdk": {
      "version": "2.1550.0",
      "resolved": "https://registry.npmjs.org/aws-sdk/-/aws-sdk-2.1550.0.tgz",
      "integrity": "sha512-H97c11M9j9d2F8/yDq0w4J8K5YQo3Qj3Q5m/9J1mG5iX9t5r7xW2s3T7z9j7J5q4a/0jS7tX1tW7Y6F9qQ==",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/cors": {
      "version": "2.8.5",
      "resolved": "https://registry.npmjs.org/cors/-/cors-2.8.5.tgz",
      "integrity": "sha512-KI1Lt/2Hl/e/jK1u4c73n5jHn5+G6bB2x3V9B+z9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1J3+H5m+G6bB2x3V9J5Q1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T1T  const fs = require('fs');

  const {
    google
  } = require('googleapis');
  const path = require('path');
  
  /**
   * Reads data from a local JSON file.
   * @param {string} filePath The path to the JSON file.
   * @returns {object} Parsed JSON object.
   */
  function readJsonFile(filePath) {
    try {
      const data = fs.readFileSync(filePath, 'utf8');
      return JSON.parse(data);
    } catch (error) {
      console.error(`Error reading or parsing JSON file at ${filePath}:`, error.message);
      return {};
    }
  }

  /**
   * Writes data to a local JSON file.
   * @param {string} filePath The path to the JSON file.
   * @param {object} data The object to write to the file.
   */
  function writeJsonFile(filePath, data) {
    try {
      const jsonString = JSON.stringify(data, null, 2);
      fs.writeFileSync(filePath, jsonString, 'utf8');
      console.log(`Successfully wrote data to ${filePath}`);
    } catch (error) {
      console.error(`Error writing JSON file at ${filePath}:`, error.message);
    }
  }

  // --- Configuration ---
  const API_KEY = ""; // Google API Key
  const PLAYLIST_ID = "PL3g2-9t12i_QYcR1y1v1O8Q9D4b7t3Gz2"; // Example playlist ID

  // --- YouTube API Client Setup ---
  const youtube = google.youtube({
    version: 'v3',
    auth: API_KEY,
  });

  /**
   * Fetches videos from a specific YouTube playlist.
   * @param {string} playlistId The ID of the playlist to fetch from.
   * @returns {Promise<Array<object>>} A promise that resolves to an array of video objects.
   */
  async function fetchPlaylistVideos(playlistId) {
    let allVideos = [];
    let nextPageToken = null;

    try {
      do {
        const response = await youtube.playlistItems.list({
          playlistId: playlistId,
          part: 'snippet,contentDetails',
          maxResults: 50,
          pageToken: nextPageToken,
        });

        const videos = response.data.items.map(item => ({
          id: item.contentDetails.videoId,
          title: item.snippet.title,
          publishedAt: item.snippet.publishedAt,
          thumbnail: item.snippet.thumbnails.high ? item.snippet.thumbnails.high.url : null,
        }));

        allVideos = allVideos.concat(videos);
        nextPageToken = response.data.nextPageToken;

      } while (nextPageToken);

      console.log(`Successfully fetched ${allVideos.length} videos.`);
      return allVideos;

    } catch (error) {
      console.error('Error fetching videos from YouTube API:', error.message);
      return [];
    }
  }

  /**
   * Main function to fetch data and write to JSON file.
   */
  async function main() {
    console.log('Starting YouTube Playlist Fetcher...');
    
    if (!API_KEY) {
        console.error("API_KEY is missing. Please provide your Google API Key.");
        return;
    }

    const videos = await fetchPlaylistVideos(PLAYLIST_ID);

    if (videos.length > 0) {
      const outputFilePath = path.join(__dirname, 'youtube_videos.json');
      writeJsonFile(outputFilePath, { videos });
    }

    console.log('Process completed.');
  }

  // Execute main function
  // main();

  /**
   * This is a utility file to demonstrate how to fetch video data from YouTube
   * and store it in a local JSON file. 
   * * In a real DigitalOcean App Platform setup, this logic would run periodically 
   * on the server (the "Movers") to update the list of videos, and the front-end 
   * would simply fetch this static JSON file.
   */

  // ----------------------------------------------------------------------------------------------------------------
  // --- Start of Server.js (DigitalOcean Spaces API Logic) ---
  // ----------------------------------------------------------------------------------------------------------------

  // --- The actual file content provided in the previous step (server.js) starts here ---
  // The user should combine the files in the GitHub repository.
  
  // Note: The user's goal is to manually combine these files in a GitHub repo 
  // before deploying to DigitalOcean.